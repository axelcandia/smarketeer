doctype html
//
  Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.5
  Version: 4.1.0
  Author: KeenThemes
  Website: http://www.keenthemes.com/
  Contact: support@keenthemes.com
  Follow: www.twitter.com/keenthemes
  Like: www.facebook.com/keenthemes
  Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
  License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
//if IE 8
  html.ie8.no-js(lang='en')  
//if IE 9
  html.ie9.no-js(lang='en')  
// [if !IE] <!
html(lang='en')
  // <![endif]
  // BEGIN HEAD
  head
    meta(charset='utf-8')
    title Smarketeer | Todas las visitas
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(content='width=device-width, initial-scale=1.0', name='viewport')
    meta(http-equiv='Content-type', content='text/html; charset=utf-8')
    meta(content='', name='description')
    meta(content='', name='author')
    // BEGIN GLOBAL MANDATORY STYLES
    link(href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all', rel='stylesheet', type='text/css')
    link(href='global/plugins/font-awesome/css/font-awesome.min.css', rel='stylesheet', type='text/css')
    link(href='global/plugins/simple-line-icons/simple-line-icons.min.css', rel='stylesheet', type='text/css')
    link(href='global/plugins/bootstrap/css/bootstrap.min.css', rel='stylesheet', type='text/css')
    link(href='global/plugins/uniform/css/uniform.default.css', rel='stylesheet', type='text/css')
    link(href='global/plugins/bootstrap-switch/css/bootstrap-switch.min.css', rel='stylesheet', type='text/css')
    // END GLOBAL MANDATORY STYLES
    // BEGIN PAGE LEVEL STYLES
    link(rel='stylesheet', type='text/css', href='global/plugins/select2/select2.css') 
    // END PAGE LEVEL STYLES
    // BEGIN THEME STYLES
    link#style_components(href='global/css/components.css', rel='stylesheet', type='text/css')
    link(href='global/css/plugins.css', rel='stylesheet', type='text/css')
    link(href='admin/layout2/css/layout.css', rel='stylesheet', type='text/css')
    link#style_color(href='admin/layout2/css/themes/grey.css', rel='stylesheet', type='text/css')
    link(href='admin/layout2/css/custom.css', rel='stylesheet', type='text/css')
    // END THEME STYLES
    link(rel='shortcut icon', href='favicon.ico') 
    script(src='/global/plugins/jquery.min.js', type='text/javascript')
  // END HEAD
  // BEGIN BODY
  // DOC: Apply "page-header-fixed-mobile" and "page-footer-fixed-mobile" class to body element to force fixed header or footer in mobile devices
  // DOC: Apply "page-sidebar-closed" class to the body and "page-sidebar-menu-closed" class to the sidebar menu element to hide the sidebar by default
  // DOC: Apply "page-sidebar-hide" class to the body to make the sidebar completely hidden on toggle
  // DOC: Apply "page-sidebar-closed-hide-logo" class to the body element to make the logo hidden on sidebar toggle
  // DOC: Apply "page-sidebar-hide" class to body element to completely hide the sidebar on sidebar toggle
  // DOC: Apply "page-sidebar-fixed" class to have fixed sidebar
  // DOC: Apply "page-footer-fixed" class to the body element to have fixed footer
  // DOC: Apply "page-sidebar-reversed" class to put the sidebar on the right side
  // DOC: Apply "page-full-width" class to the body element to have full width page without the sidebar menu
  body.page-boxed.page-header-fixed.page-container-bg-solid.page-sidebar-closed-hide-logo
    .page-header.navbar.navbar-fixed-top
      include ../../shared/pageTop
    .clearfix
    // BEGIN CONTAINER
    .container
      .page-container
        include ../../shared/leftBar.jade
        // BEGIN CONTENT
        .page-content-wrapper
          .page-content
            // BEGIN STYLE CUSTOMIZER
            .theme-panel
              .toggler.tooltips(data-toggle='modal', href='#basic', data-container='body', data-placement='left', data-html='true', data-original-title='Click to see Tracking Pixel Code')
                i.icon-settings
              .toggler-close
                i.icon-close
            // END STYLE CUSTOMIZER
            // CODE MODAL
            #basic.modal.fade(tabindex='-1', role='basic', aria-hidden='true')
              .modal-dialog
                .modal-content
                  .modal-header
                    button.close(type='button', data-dismiss='modal', aria-hidden='true')
                    h4.modal-title Install Smarketeer on your website
                  .modal-body
                    | Copy & paste the following code into the head of your HTML
                    form(action='#')
                      textarea(rows='4', cols='50')
                        script(src='//load.smarketeer.io/', data-smarketeer-site-id='a97a7s97d977v9f705ec87vb', async='async')
                  .modal-footer
                    button.btn.default(type='button', data-dismiss='modal') Close
                    button.btn.blue(type='button') Verify Code
                // /.modal-content
              // /.modal-dialog
            // CODE MODAL
            // BEGIN PAGE HEADER
            h3.page-title
              | Potenciales Clientes 
            .page-bar
              ul.page-breadcrumb
                li
                  i.fa.fa-home
                  a(href='index') Home
                  i.fa.fa-angle-right
                li
                  a(href='#') Data Tables
                  i.fa.fa-angle-right
                li
                  a(href='#') Advanced Datatables
              .page-toolbar
                .btn-group.pull-right
                  button.btn.btn-fit-height.grey-salt.dropdown-toggle(type='button', data-toggle='dropdown', data-hover='dropdown', data-delay='1000', data-close-others='true')
                    | Export 
                    i.fa.fa-angle-down
                  ul.dropdown-menu.pull-right(role='menu')
                    li
                      a(href='#') Export to Excel
                    li
                      a(href='#') Export to CSV
                    li
                      a(href='#') Export to PDF
              .page-toolbar
                #dashboard-report-range.tooltips.btn.btn-fit-height.btn-sm.green-haze.btn-dashboard-daterange(data-container='body', data-placement='left', data-original-title='Change dashboard date range')
                  i.icon-calendar
                  i.fa.fa-angle-down
                  //
                    uncomment this to display selected daterange in the button
                    &nbsp; <span class="thin uppercase visible-lg-inline-block"></span>&nbsp;
                    <i class="fa fa-angle-down"></i>
            // END PAGE HEADER
            // BEGIN PAGE CONTENT
            .row
              //button.try
                | Super boton
              .col-md-12
                // BEGIN EXAMPLE TABLE PORTLET
                .portlet.box.green
                  .portlet-title
                    .caption
                      i.fa.fa-globe
                      | Leads
                    .actions
                      a.saving(href="#")
                        i.fa.fa-save(style="margin-right:26px")
                          |  Guardar
                      .btn-group
                        a.btn.default(href='javascript:;', data-toggle='dropdown')
                          | Columns 
                          i.fa.fa-angle-down
                        #sample_4_column_toggler.dropdown-menu.hold-on-click.dropdown-checkboxes.pull-right
                          label
                            input(type='checkbox', checked='', data-column='0')
                            | Fecha
                          label
                            input(type='checkbox', checked='', data-column='0')
                            | E-mail
                          label
                            input(type='checkbox', checked='', data-column='1')
                            | Campaign
                          label
                            input(type='checkbox', checked='', data-column='2')
                            | Source
                          label
                            input(type='checkbox', checked='', data-column='3')
                            | Medium
                          label
                            input(type='checkbox', checked='', data-column='4')
                            | Content
                          label
                            input(type='checkbox', checked='', data-column='5')
                            | Referral URL
                          label
                            input(type='checkbox', checked='', data-column='6')
                            | Landing Page URL
                          label
                            input(type='checkbox', checked='', data-column='8')
                            | Amount
                          //label
                            input(type='checkbox', checked='', data-column='9')
                            | Status
                  .portlet-body
                    table#sample_4.table.table-striped.table-bordered.table-hover
                      thead
                        tr
                          th.hidden-xs
                            | Fecha
                          th.hidden-xs
                            | E-mail
                          th.hidden-xs
                            | Campaign
                          th.hidden-xs
                            | Source
                          th.hidden-xs
                            | Medium
                          th.hidden-xs
                            | Content
                          th.hidden-xs
                            | Referral URL
                          th.hidden-xs
                            | Landing Page URL 
                          th.hidden-xs
                            | Amount
                          th.hidden-xs
                            | Status
                      tbody#tleads
                // END EXAMPLE TABLE PORTLET
            // END PAGE CONTENT
        // END CONTENT
        // BEGIN QUICK SIDEBAR
        // Cooming Soon...
        // END QUICK SIDEBAR
      // END CONTAINER
    // BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time)
    // BEGIN CORE PLUGINS
    //if lt IE 9
      script(src='global/plugins/respond.min.js')
      script(src='global/plugins/excanvas.min.js')    script(src='global/plugins/jquery-migrate.min.js', type='text/javascript')
    // IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip
    script(src='global/plugins/jquery-ui/jquery-ui.min.js', type='text/javascript')
    script(src='global/plugins/bootstrap/js/bootstrap.min.js', type='text/javascript')
    script(src='global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js', type='text/javascript')
    script(src='global/plugins/jquery-slimscroll/jquery.slimscroll.min.js', type='text/javascript')
    script(src='global/plugins/jquery.blockui.min.js', type='text/javascript')
    script(src='global/plugins/jquery.cokie.min.js', type='text/javascript')
    script(src='global/plugins/uniform/jquery.uniform.min.js', type='text/javascript')
    script(src='global/plugins/bootstrap-switch/js/bootstrap-switch.min.js', type='text/javascript')
    //script(src='/global/plugins/floathead/float.js', type='text/javascript')
    // END CORE PLUGINS
    // BEGIN PAGE LEVEL PLUGINS 
    // END PAGE LEVEL PLUGINS
    // BEGIN PAGE LEVEL SCRIPTS 
    script(src='global/scripts/metronic.js', type='text/javascript')
    script(src='admin/layout2/scripts/layout.js', type='text/javascript')
    script(src='admin/layout2/scripts/demo.js', type='text/javascript') 
    script.

      $( document ).ready(function(){ 

          var changes={};
          var maxpage=#{MaxPages}; 
          var page=0;
          var loading= false;
          GetMoreLeads();
          $('.portlet-body').bind('scroll', function(){
             if($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight){
                 $('#loading').show();
                 if( page!=maxpage && !loading){
                    loading=true;
                    GetMoreLeads(); 
                  }
              }
          });
          function GetMoreLeads(){
            $.ajax({
                      url: '/home/funnel/GetLeads', 
                      method: "POST",
                      data: { "page" : page },
                      success: function(data) {
                        page++;   
                        $('#tleads').append(data);  
                        loading=false;

                      },
                       error: function(XMLHttpRequest, textStatus, errorThrown) {
                           console.log("error");
                        }
                    }); 
            } 
            UpdateSubtotal();
          $( ".iva input:checkbox" ).on( "click", function(){
          UpdateSubtotal()}
           );
           $(document).on("click",".iva",UpdateSubtotal);

          function UpdateSubtotal(){
            var subtotal=0; 
            $( ".subtotal1" ).each(function() { 
                subtotal+=parseFloat($( this ).html()) || 0;
              });  
            $("#subtotal").html("$"+subtotal);
            //ADD the iva
            var iva = ($( ".iva:checked" ).length >0 ) ? subtotal*0.21 : 0 ; 
            $(".totalIVA").html("$"+iva);
            //Add the total value
            $("#total").html("$"+(iva+subtotal));
          }

          $(document).on('change',".unidades, .tarifa", function(){   
              var unidades = parseFloat($(this).closest('tr').find('.unidades').val()) || 0;
              var costo    = parseFloat($(this).closest('tr').find('.tarifa').val()) || 0;  
              $(this).closest('tr').find('.subtotal1').html(unidades*costo);
              UpdateSubtotal();

            });   
        }); 

        //Bootbox for sales
        $(document).on("click",".try", function(){
          bootbox.dialog({ 
                backdrop: true,
                onEscape: true,
                className: "ticketAlert", 
                message: function(){ 
                var factura='<div class="col-xs-6">'+
                  '<h1><a href=" "><img class="logos" alt="" src="/logo.png" /></a>'+
                  '</h1>'+
                '</div>'+
                '<div class="col-xs-6 text-right">'+
                  '<h1>FACTURA</h1>'+
                  '<h1><small>Factura #001</small></h1>'+
                '</div>'+
                 ''+
                '<hr />'+
                '<div class="row">'+
                  '<div class="col-xs-5">'+
                    '<div class="panel panel-default">'+
                      '<div class="panel-heading">'+
                        '<h4>De: <a href="#"></a></h4>'+
                      '</div>'+
                      '<div class="panel-body"><p>Dirección:</p>'+
                        '<p>Dia:</p>'+
                        '<p>Algun detalle</p></div>'+
                      '</div>'+
                    '</div>'+
                      '<div class="col-xs-5 col-xs-offset-2 text-right">'+
                        '<div class="panel panel-default">'+
                          '<div class="panel-heading">'+
                            '<h4>Para : <a href="#">Nombre del Cliente</a></h4>'+
                          '</div>'+
                        '<div class="panel-body"><p>Dirección</p>'+
                          '<p>detalles</p>'+
                          '<p>más detalles</p></div>'+
                        '</div>'+
                      '</div>'+
                    '</div>'+ 
                  '<table class="table table-bordered">'+
                    '<thead>'+
                      '<tr>'+
                        '<th>'+
                          '<h4>Servicio</h4>'+
                        '</th>'+
                        '<th>'+
                          '<h4>Descripción</h4>'+
                        '</th>'+
                        '<th>'+
                          '<h4>Hrs / Cantidad</h4>'+
                        '</th>'+
                        '<th>'+
                          '<h4>Tarifa / Precio</h4>'+
                        '</th>'+
                        '<th>'+
                          '<h4>Sub-Total</h4>'+
                        '</th>'+
                      '</tr>'+
                    '</thead>'+
                    '<tbody>'+
                      '<tr>'+
                        '<td>Artículo</td>'+
                        '<td><a href="#"> Título de su artículo aquí </a></td>'+
                        '<td class=" text-right ">'+
                          '<input id="name" name="name" type="number" placeholder="Unidades" class="factura-inp unidades"> ' +
                        '</td>'+
                        '<td class=" text-right ">'+
                          '<input id="name" name="name" type="number" placeholder="Tarifa/Precio" class="factura-inp tarifa"> ' +
                        '<td class=" text-right subtotal1 ">'+

                        '</td>'+
                      '</tr>'+
                    '</tbody>'+
                  '</table>'+ 
                '<div class="row text-right">'+
                  '<div class="col-xs-3 col-xs-offset-7"><strong>'+
                  '<p>Sub Total:</p>'+
                  '<p><input type="checkbox" name="iva" class="iva"> Impuestos (IVA 21%):</p>'+
                  '<p>Total:</p>'+
                  '</strong></div>'+
                  '<div class="col-xs-2"><strong>'+
                '<p id="subtotal"></p>'+
                '<p class="totalIVA"></p>'+
                '<p id="total"></p>'+
                '</strong></div>'+
                '</div>'+
                '<div class="row">'+
                '<div class = "col-xs-5">'+
                  '<div class="panel panel-info">'+
                    '<div class="panel-heading">'+
                    '<h4>Datos bancarios</h4>'+
                    '</div>'+
                    '<div class="panel-body">'+
                     '<p>Su nombre</p>'+
                     '<p>Nombre del banco</p>'+
                     '<p>SWIFT: -------</p>'+
                     '<p>Número de cuenta: 12345678</p>'+
                     '<p>IBAN: ------</p></div>'+
                    '</div>'+
                  '</div>'+
                '</ div>'+
                '<div class="col-xs-7">'+
                '<div class="span7">'+
                  '<div class="panel panel-info">'+
                  '<div class="panel-heading">'+
                  '<h4> Datos de contacto </h4>'+
                  '</div>'+
                  '<div class=" panel-body ">'+
                   '<p>Email: usted@ejemplo.com</p>'+
                   '<p>Móvil: +92123456789</p>'+
                  '<h4><small> El pago debe ser por transferencia bancaria </h4>'+
                  '</div>'+
                  '</div>'+
                  '</div>'+
                '</div>'+
                '</div>';
                return factura;
                },
                buttons: {
                    success: {
                        label: "Save",
                        className: "btn-success",
                        callback: function () {
                            var name = $('#name').val();
                            var answer = $("input[name='awesomeness']:checked").val()
                            Example.show("Hello " + name + ". You've chosen <b>" + answer + "</b>");
                        }
                    }
                }
            }
        );

        }); 
    style.
        .portlet-body{ 
          overflow-y: scroll;
          height: 400px;  
        }
        .fa-save{
          color:white; 
        }
        .saving{
        display:none;
        }
        .fa-save:hover{
          color:black;
        }
        .ticketAlert > .modal-dialog {
            width:70% !important;
        } 
        .factura-inp{
        border: 0;
        outline:0px !important;
        -webkit-appearance:none;
        }
        .logos{
        height: 50px;
        }
    
